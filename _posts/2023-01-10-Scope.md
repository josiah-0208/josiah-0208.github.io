---
layout: single
title: "Scope_변수의 사용 범위"

toc: true
toc_sticky: true
---

# 'Scope'

Scope를 직역하면 '범위'이다. 

변수 즉 식별자를 쓸 수 있는 범위다.

js 뿐만 아니라, 모든 언어에서는 Scope의 개념이 존재한다.

스코프는 참조할 식별자(변수나 함수의 이름과 같이 어떤 대상을 다른 대상과 구분하여 식별할 수 있는 유일한 이름)를 찾아내기 위한 규칙이다. 자바스크립트는 이 규칙대로 식별자를 찾는다.

이 규칙을 알아야 오류를 최소화 할 수 있다.

그렇다면, js는 어떤 규칙으로 식별자를 찾을까?

js는 스코프 타입이 2가지가 있다.
전역(global)과 지역(local)이다.
js의 모든 변수는 둘 중 하나의 스코프를 갖는다. 

전역 변수 (Global variable)
전역에서 선언된 변수이며 어디에든 참조할 수 있다.
지역 변수 (Local variable)
지역(함수) 내에서 선언된 변수이며 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.
변수는 선언 위치(전역 또는 지역)에 의해 스코프를 가지게 된다. 즉, 전역에서 선언된 변수는 전역 스코프를 갖는 전역 변수이고, 지역(자바스크립트의 경우 함수 내부)에서 선언된 변수는 지역 스코프를 갖는 지역 변수가 된다.

전역 스코프를 갖는 전역 변수는 전역(코드 어디서든지)에서 참조할 수 있다. 지역(함수 내부)에서 선언된 지역 변수는 그 지역과 그 지역의 하부 지역에서만 참조할 수 있다.

전역 영역에서는 전역변수만이 참조 가능하고 함수 내 지역 영역에서는 전역과 지역 변수 모두 참조 가능하나 위 예제와 같이 변수명이 중복된 경우, 지역변수를 우선하여 참조한다.

대표적인 예시의 코드이다.

```js
var x = 0

function function() {
    var x = 1
    console.log(x)
}

block()          ---   1
console.log(x)   ---   0
```

변수 x가 중복 선언되었다.
하나는 전역 global로 선언되고, 하나는 함수 안에서 선언되었다.
console.log는 어떤 x를 참조해야 할까?
자바스크립트는 어떤 기준으로 식별할까?

위 코드에서 전역에 선언된 변수 x는 어디에서든 참조할 수 있다.
하지만 함수 function 내에서 선언된 변수 x는 함수 내부에서만 참조할 수 있고, 외부에서는 참조할 수 없다.
이러한 규칙들을 scope라고 한다.

scope가 없다면, 같은 식별자 이름은 충돌을 일으키므로 프로그램에 하나만 있어야 한다.
예를들어 데스크톱 디렉터리에서도 같은 파일의 이름은 가질 수 없이 말이다.
scope는 이러한 식별자의 이름의 충돌을 방지하는 규칙이다.

자바스크립트의 스코프는 타 언어의 scope와는 다른 특징을 가지고 있다.

대부분의 C-family language는 블록 레벨 스코프(block-level scope)를 따른다. 블록 레벨 스코프란 코드 블록({…})내에서 유효한 스코프를 의미한다. 여기서 “유효하다”라는 것은 “참조(접근)할 수 있다”라는 뜻이다.

자바스크립트는 함수 레벨 스코프를 사용한다. 즉, 함수 내에서 선언된 매개변수와 변수는 함수 외부에서는 유효하지 않다.

스코프 체인
식별자를 찾기위해 스코프를 가까운 안에서부터 바깥쪽으로 단계적으로 탐색하는 과정을 스코프 체이닝이라 한다. 
반대로 바깥에서 안으로 탐색은 허용되지 않는다.

-----------------

사실 변수명의 중복을 피하면서 개발하는게 좋은 방법인 것 같다.
더 깊이 들어가면 많은 정보가 있으니
문제가 생기면 깊이 공부하자.
개발에 있어서는
변수에 범위가 있고, 범위 내에서만 접근이 가능하다라고 생각하자.

참조한 블로그글에서 아주 잘 정리해주셨다.
공부하면서 나의 방식으로 기록했다.

감사한 참조
https://poiemaweb.com/js-scope
https://hanamon.kr/javascript-%EC%8A%A4%EC%BD%94%ED%94%84%EC%99%80-%EB%B3%80%EC%88%98%EC%84%A0%EC%96%B8%ED%82%A4%EC%9B%8C%EB%93%9C-%EC%B0%A8%EC%9D%B4%EC%A0%90/
https://youngjinmo.github.io/2021/08/js-scope/